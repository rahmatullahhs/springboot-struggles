<div class="container mt-5">
  <!-- ðŸ›’ CART SECTION -->
  <h3 class="mb-3"><i class="bi bi-cart-fill me-2"></i>Cart</h3>

  <div *ngIf="cartItems.length > 0; else emptyCart" class="mb-5">
    <div class="list-group">
      <div *ngFor="let item of cartItems" class="list-group-item d-flex justify-content-between align-items-center">
        <div>
          <strong>{{ item.product.name }}</strong> - ${{ item.product.price }}
        </div>
        <div class="d-flex align-items-center">
      <input
  type="number"
  class="form-control form-control-sm me-2"
  style="width: 70px;"
  [value]="item.quantity"
  [min]="1"
  [max]="item.product.quantity"
  (change)="updateQuantity(item.product.id, getInputValue($event))"
/>

          <button class="btn btn-sm btn-danger" (click)="remove(item.product.id)">
            <i class="bi bi-trash"></i>
          </button>
        </div>
      </div>
    </div>

    <hr />

    <div class="d-flex justify-content-between align-items-center">
      <strong class="fs-5">Total: ${{ total }}</strong>

      <!-- âœ… Checkout Button -->
      <button class="btn btn-success" (click)="goToCheckout()">
        <i class="bi bi-credit-card me-1"></i> Checkout
      </button>


    </div>
  </div>


  <ng-template #emptyCart>
    <div class="alert alert-warning d-flex align-items-center">
      <i class="bi bi-cart-x fs-4 me-2"></i> Cart is empty.
    </div>
  </ng-template>

  <!-- ðŸ“¦ PRODUCT LIST SECTION -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h3 class="text-primary">
      <i class="bi bi-box-seam-fill me-2"></i> Product List
    </h3>
  </div>

  <div *ngIf="products.length > 0; else noProducts">
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
      <div class="col" *ngFor="let product of products">
        <div class="card h-100 shadow-sm">
          <div class="card-body">
            <h5 class="card-title text-primary">{{ product.name }}</h5>
            <p class="card-text mb-1"><strong>Category:</strong> {{ product.category }}</p>
            <p class="card-text mb-1"><strong>Brand:</strong> {{ product.brand }}</p>
            <p class="card-text mb-1"><strong>Details:</strong> {{ product.details }}</p>
            <p class="card-text mb-2">
  
  <span class="text-muted"><strong>Quantity:</strong> {{ product.quantity }}</span>
</p>

            <p class="card-text"><strong>Price:</strong> ${{ product.price }}</p>
          </div>
       <div class="card-footer d-flex justify-content-between align-items-center">
  <button class="btn btn-sm btn-success" (click)="addToCart(product)" [disabled]="product.quantity === 0">
    <i class="bi bi-cart-plus me-1"></i> Add to Cart
  </button>

  <span class="badge px-3 py-1 fs-6"
        [ngClass]="{
          'bg-success': product.quantity > 0,
          'bg-danger': product.quantity === 0
        }">
    {{ product.quantity > 0 ? 'In Stock (' + product.quantity + ')' : 'Out of Stock (' + product.quantity + ')' }}
  </span>
</div>

        </div>
      </div>
    </div>
  </div>

  <ng-template #noProducts>
    <div class="text-center mt-5 text-muted">
      <i class="bi bi-emoji-frown fs-1"></i>
      <p>No products available</p>
    </div>
  </ng-template>
</div>