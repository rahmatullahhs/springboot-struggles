<div class="container mt-4">
  <form [formGroup]="invoiceForm">
    <!-- Shop Info -->
    <div class="card mb-4 shadow-sm">
      <div class="card-body d-flex align-items-center justify-content-between">
        <div class="d-flex align-items-center">
          <div style="width: 80px; height: 80px; margin-right: 15px;">
            <img src="assets/gt-logo.jpg" alt="Business Icon"
              style="max-width: 100%; max-height: 100%; object-fit: contain; border: 1px solid black; border-radius: 4px;" />
          </div>
          <div>
            <h3 class="mb-1 text-primary"><b>Global Tech</b></h3>
            <p class="mb-0 text-muted">1234 Tech Avenue, Silicon City, CA 94043</p>
            <p class="mb-0 text-muted">Phone: +1 (555) 123-4567 | Email: info@globaltech.com</p>
            <p class="mb-0 text-muted">Website: www.globaltech.com</p>
          </div>
        </div>
        <div>
          <h5 class="text-muted">INVOICE</h5>
          <h6 class="fw-bold">#{{ invoiceForm.value.invoiceNumber || '0000' }}</h6>
        </div>
      </div>
    </div>

    <!-- Invoice Info -->
    <div class="card mb-4 shadow-sm">
      <div class="card-body">
        <div class="row g-3">
          <div class="col-md-4">
            <label for="invoiceNumber" class="form-label">Invoice No</label>
            <input id="invoiceNumber" type="text" class="form-control" formControlName="invoiceNumber" placeholder="Invoice Number">
          </div>

          <div class="col-md-4">
            <label for="date" class="form-label">Purchase Date</label>
            <input type="date" class="form-control" id="date" formControlName="date">
          </div>

          <div class="col-md-4">
            <label for="createdBy" class="form-label">Created By</label>
            <input type="text" class="form-control" id="createdBy" formControlName="createdBy" placeholder="Created By">
          </div>
        </div>
      </div>
    </div>

    <!-- Customer Info -->
    <div class="card mb-4 shadow-sm">
      <div class="card-body">
        <div class="row g-3">
          <div class="col-md-6">
            <label for="customerName" class="form-label">Customer Name</label>
            <input id="customerName" type="text" class="form-control" formControlName="customerName" placeholder="Full name" />
          </div>
          <div class="col-md-6">
            <label for="customerEmail" class="form-label">Email</label>
            <input id="customerEmail" type="email" class="form-control" formControlName="customerEmail" placeholder="email@example.com" />
          </div>
        </div>

        <div class="row g-3 mt-3">
          <div class="col-md-6">
            <label for="customerPhone" class="form-label">Phone Number</label>
            <input id="customerPhone" type="tel" class="form-control" formControlName="customerPhone" placeholder="+1 555-1234" />
          </div>
          <div class="col-md-6">
            <label for="customerAddress" class="form-label">Address</label>
            <input id="customerAddress" type="text" class="form-control" formControlName="customerAddress" placeholder="Customer Address" />
          </div>
        </div>
      </div>
    </div>

    <!-- Products Table -->
    <h4 class="mb-3 text-success">Purchase Summary</h4>

    <table class="table table-bordered table-striped" *ngIf="cartItems.length > 0">
      <thead>
        <tr class="table-success">
          <th>#</th>
          <th>Product</th>
          <th>Qty</th>
          <th>Price</th>
          <th>Total</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of cartItems; let i = index">
          <td>{{ i + 1 }}</td>
          <td>{{ item.product.name }}</td>
          <td>{{ item.quantity }}</td>
          <td>{{ item.product.price | currency }}</td>
          <td>{{ item.quantity * item.product.price | currency }}</td>
        </tr>
      </tbody>
    </table>

    <div *ngIf="cartItems.length === 0" class="alert alert-warning">Your cart is empty.</div>

    <!-- Totals -->
    <div class="card p-3 shadow-sm mt-4" style="max-width: 400px;">
      <div class="mb-2">
        <label for="discount" class="form-label">Discount</label>
        <input id="discount" type="number" class="form-control" formControlName="discount" min="0">
      </div>
      <div class="mb-2">
        <label for="taxRate" class="form-label">Tax Rate (%)</label>
        <input id="taxRate" type="number" class="form-control" formControlName="taxRate" min="0">
      </div>
      <div class="mb-2">
        <label for="paid" class="form-label">Amount Paid</label>
        <input id="paid" type="number" class="form-control" formControlName="paid" min="0">
      </div>

      <p><strong>Subtotal:</strong> {{ invoiceForm.value.subtotal | currency }}</p>
      <p><strong>Tax:</strong> {{ invoiceForm.value.taxAmount | currency }}</p>
      <p><strong>Total:</strong> {{ invoiceForm.value.total | currency }}</p>
      <p><strong>Due:</strong> {{ invoiceForm.value.due | currency }}</p>

      <button class="btn btn-success w-100 mt-3" (click)="submitOrder()" [disabled]="invoiceForm.invalid || cartItems.length === 0">
        Complete Sale
      </button>

      <button class="btn btn-outline-primary w-100 mt-2" (click)="printInvoice()" [disabled]="cartItems.length === 0">
        Print Invoice
      </button>
    </div>
  </form>
</div>
