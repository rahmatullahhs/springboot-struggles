<div class="container mt-4">
  <div class="card shadow border-primary">
    <div class="card-header bg-primary text-white ">
      <h4><i class="fas fa-box-open me-2"></i>{{ editing ? 'Edit Product' : 'Purchase Product' }}</h4>
    </div>
    <div class="card-body bg-light">
      <form [formGroup]="goodForm" (ngSubmit)="onSubmit()">

        <!-- CATEGORY & BRAND -->
        <div class="row mb-3">
          <div class="col-md-4">
            <label for="category" class="form-label"><i class="fas fa-list me-1 text-primary"></i>Category</label>
            <select id="category" class="form-select" formControlName="category">
              <option value="" disabled>Select Category</option>
              <option *ngFor="let c of categories" [value]="c.id">{{ c.name }}</option>
            </select>
          </div>
          <div class="col-md-4">
            <label for="brand" class="form-label"><i class="fas fa-tags me-1 text-success"></i>Brand</label>
            <select id="brand" class="form-select" formControlName="brand">
              <option value="" disabled>Select Brand</option>
              <option *ngFor="let b of brands" [value]="b.id">{{ b.name }}</option>
            </select>
          </div>
        </div>

        <!-- PRODUCT NAME -->
        <div class="row mb-3">
          <div class="col-md-4">
            <label for="name" class="form-label"><i class="fas fa-box me-1 text-info"></i>Product Name</label>
            <input id="name" type="text" class="form-control" formControlName="name" required>
          </div>
          <div class="col-md-8">
            <label for="details" class="form-label"><i class="fas fa-info-circle me-1 text-muted"></i>Details</label>
            <input id="details" type="text" class="form-control" formControlName="details">
          </div>
        </div>

        <!-- INVOICE, SUPPLIER, DATE -->
        <div class="row mb-3">
          <div class="col-md-4">
            <label for="invoice" class="form-label"><i class="fas fa-file-invoice me-1 text-danger"></i>Invoice No</label>
            <input id="invoice" type="text" class="form-control" formControlName="invoice">
          </div>
          <div class="col-md-4">
            <label for="supplier" class="form-label"><i class="fas fa-truck me-1 text-info"></i>Supplier</label>
            <select id="supplier" class="form-select" formControlName="supplier">
              <option value="" disabled>Select Supplier</option>
              <option *ngFor="let s of supplier" [value]="s.id">{{ s.name }}</option>
            </select>
          </div>
          <div class="col-md-4">
            <label for="date" class="form-label"><i class="fas fa-calendar me-1 text-primary"></i>Purchase Date</label>
            <input type="date" class="form-control" id="date" formControlName="date">
          </div>
        </div>

        <!-- PRICING WITH DISCOUNT -->
<div class="row mb-4">
  <div class="col-md-3">
    <label for="price" class="form-label"><i class="fas fa-dollar-sign me-1 text-success"></i>Unit Price</label>
    <input id="price" type="number" class="form-control" formControlName="price" (blur)="onFocusLost()">
  </div>
  <div class="col-md-3">
    <label for="qty" class="form-label"><i class="fas fa-cubes me-1 text-primary"></i>Quantity</label>
    <input id="qty" type="number" class="form-control" formControlName="qty" (blur)="onFocusLost()">
  </div>
  <div class="col-md-3">
    <label for="discount" class="form-label"><i class="fas fa-percentage me-1 text-warning"></i>Discount</label>
    <input id="discount" type="number" class="form-control" formControlName="discount" (blur)="onFocusLost()">
  </div>
  <div class="col-md-3">
    <label for="total" class="form-label"><i class="fas fa-calculator me-1 text-dark"></i>Total Price</label>
    <input type="number" class="form-control" [value]="totalprice" readonly>
  </div>
</div>

<!-- FINAL PRICE, PAID, DUE -->
<div class="row mb-4">
  <div class="col-md-4">
    <label for="final" class="form-label"><i class="fas fa-money-bill-wave me-1 text-success"></i>Final Price (after discount)</label>
    <input type="number" class="form-control" [value]="finalprice" readonly>
  </div>
  <div class="col-md-4">
    <label for="paid" class="form-label"><i class="fas fa-hand-holding-usd me-1 text-success"></i>Paid</label>
    <input id="paid" type="number" class="form-control" formControlName="paid" (blur)="onFocusLost()">
  </div>
  <div class="col-md-4">
    <label for="due" class="form-label"><i class="fas fa-wallet me-1 text-danger"></i>Due</label>
    <input id="due" type="number" class="form-control" [value]="due" readonly>
  </div>
</div>


        <!-- SUBMIT BUTTONS -->
        <button type="submit" class="btn btn-success me-2">
          <i class="fas fa-check-circle me-1"></i>{{ editing ? 'Update' : 'Add' }}
        </button>
        <button *ngIf="editing" type="button" class="btn btn-secondary" (click)="cancelEdit()">
          <i class="fas fa-times-circle me-1"></i>Cancel
        </button>
      </form>
    </div>
  </div>

  <!-- NAVIGATION -->
  <div class="mt-4 mb-3">
    <a routerLink="/addcategory" class="btn btn-outline-info me-2"><i class="fas fa-list"></i> Categories</a>
    <a routerLink="/addbrand" class="btn btn-outline-secondary me-2"><i class="fas fa-tags"></i> Brands</a>
    <a routerLink="/viewsupplier" class="btn btn-outline-dark me-2"><i class="fas fa-truck"></i> Suppliers</a>
    <a routerLink="/viewgoods" class="btn btn-outline-info"><i class="fas fa-boxes"></i> View Stock</a>
  </div>
</div>
